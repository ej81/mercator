<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mercator by ej81</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Mercator</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/ej81/mercator" class="btn">View on GitHub</a>
      <a href="https://github.com/ej81/mercator/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ej81/mercator/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="spherical-mercator-projection-for-matplotlib" class="anchor" href="#spherical-mercator-projection-for-matplotlib" aria-hidden="true"><span class="octicon octicon-link"></span></a>Spherical Mercator projection for matplotlib</h1>

<h2>
<a id="prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites</h2>

<ol>
<li>matplotlib [<a href="http://matplotlib.org">http://matplotlib.org</a>]</li>
<li>numpy [<a href="http://numpy.org">http://numpy.org</a>]</li>
<li>pyshp [<a href="https://github.com/GeospatialPython/pyshp">https://github.com/GeospatialPython/pyshp</a>]</li>
<li>gdal (optional, for clipping shapefiles)</li>
</ol>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>An installation script is not yet available. To install this package, just
download the source with <code>git clone https://github.com/ej81/mercator.git</code>.
Place the directory <code>mercator/</code> directly inside the project that you are
working on or set the environment variable <code>$PYTHONPATH</code> to point to it.</p>

<p>For example:</p>

<pre><code>mkdir $HOME/python
cd $HOME/python
git clone https://github.com/ej81/mercator.git
export PYTHONPATH=$HOME/python:$PYTHONPATH
</code></pre>

<h2>
<a id="map-data" class="anchor" href="#map-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Map data</h2>

<p>In order to display the coastline in your figures, you need to download the
GSHHS database in ESRI shapefile format from
[<a href="http://www.soest.hawaii.edu/pwessel/gshhg/">http://www.soest.hawaii.edu/pwessel/gshhg/</a>]. The files should be placed inside
the package directory in the subdirectory <code>data/</code>. </p>

<p>If you are only interested in a small region, performance can be increased by
clipping the shapefiles to roughly the correct area. For example for the
Mediterranean Sea you can do:</p>

<pre><code>for res in f h l i c; do
  ogr2ogr medsea_${res}.shp ${res}/GSHHS_${res}_L1.shp -clipsrc -20 15 50 60
done
</code></pre>

<p>Then you can do <code>ax.coastline('medsea_f.shp')</code> instead of
<code>ax.coastline('GSHHS_f_L1.shp')</code>. Especially for the higher resolutions
this should make a big difference.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<h3>
<a id="plotting-locations-on-a-map" class="anchor" href="#plotting-locations-on-a-map" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plotting locations on a map</h3>

<p>Create a file <code>places.txt</code> with your favourite cities:</p>

<pre><code># latitude,longitude,name
52.366667,4.9,Amsterdam
51.507222,-0.1275,London
48.8567,2.3508,Paris
52.516667,13.383333,Berlin
</code></pre>

<p>Then run the following code to plot:</p>

<pre><code>import mercator
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure(facecolor='white')
axes = plt.axes(projection='mercator', minutes=True)
axes.coastline('GSHHS_i_L1.shp')
fig.add_axes(axes)

plt.title("Places where I've been")

data = np.genfromtxt('places.txt', delimiter=',', usecols=(0,1,2), dtype=None)
for lat, lon, name in data:
    plt.plot(lon, lat, 'r', marker=mercator.marker.pin, ms=25)
    plt.annotate(name, xy=[lon,lat], xytext=(0, -15),
                 textcoords='offset points', ha='center')

plt.savefig('places.pdf')
plt.show()
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ej81/mercator">Mercator</a> is maintained by <a href="https://github.com/ej81">ej81</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
